<!doctype html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<title>Laravel 101</title>

		<meta name="description" content="An introduction to the Laravel framework, for the IT-HTL Ybbs">
		<meta name="author" content="Simon Hell">

		<meta name="apple-mobile-web-app-capable" content="yes" />
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
		<link rel="stylesheet" href="css/reveal.min.css">
		<link rel="stylesheet" href="css/theme/laravel101.min.css" id="theme">

		<!-- For syntax highlighting -->
		<link rel="stylesheet" href="lib/css/zenburn.css">

		<!-- If the query includes 'print-pdf', include the PDF print sheet -->
		<script>
			if( window.location.search.match( /print-pdf/gi ) ) {
				var link = document.createElement( 'link' );
				link.rel = 'stylesheet';
				link.type = 'text/css';
				link.href = 'css/print/pdf.css';
				document.getElementsByTagName( 'head' )[0].appendChild( link );
			}
		</script>

		<!--[if lt IE 9]>
		<script src="lib/js/html5shiv.js"></script>
		<![endif]-->
	</head>

	<body>

		<div class="reveal">
			<div class="slides">


<section data-background="/img/background.jpg" data-background-transition="zoom" class="bg-inverse" data-transition="fade">
	<h1>Laravel 101</h1>
	<p>
		START YOUR WEBDEV CAREER RIGHT
	</p>
</section>


<section>
	<h2>Simon Hell</h2>
	<ul>
		<li class="fragment roll-in">Web Developer und Entrepreneur @<a href="http://www.deckweiss.at">Deckweiss</a>
			<em class="aside">Front- und Backend</em>
		</li>
		<li class="fragment roll-in">Am Programmieren seit 2011
			<em class="aside">Und immer noch hyped vom Coden</em>
		</li>
		<li class="fragment roll-in">Gründer von
			<a href="http://www.deckweiss.at">Deckweiss</a>,
			<a href="https://www.facebook.com/groups/453159778459382/?ref=bookmarks">Developers im Mostviertel</a> &
			<a href="#">Pengwin </a>(COMING SOON)
		</li>
		<li class="fragment roll-in"><img src="/img/webpack.png" class="inline no-shadow" height="184">
			<img src="/img/laravel.png" class="inline no-shadow" height="184">
			<img src="/img/vue.svg" class="inline no-shadow" height="184" width="376">
			<img src="img/react.png" class="inline no-shadow" height="184" alt="">
		</li>
	</ul>
</section>


<section data-background="/img/background.jpg" data-background-transition="slide" class="bg-inverse" data-transition="linear">
	<h1>Laravel</h1>
	<p class="fragment">
		A free, open source, MVC web-application framework
	</p>
	<p class="fragment">
		2011 (v1.0) &mdash; current (v5.6.33)
	</p>
	<p class="fragment">
		Package-based dependency management
	</p>
	<p class="fragment">
		<a href="//laravel.com"><i class="fa fa-fw fa-cloud-download"></i> laravel.com</a>
	</p>
</section>


<section class="full-height" data-background="/img/excited.gif" data-background-transition="slide" data-transition="linear">
	<h2 class="bar">Let's go</h2>
</section>


<section>
	<h2>Setup</h2>
	<ul>
		<li class="fragment roll-in">Xampp (PHP, MySQL)</li>
		<li class="fragment roll-in">Jetbrains PhpStorm</li>
		<li class="fragment roll-in"></li>
		<li class="fragment roll-in">XDEBUG
			<em class="aside">
				<a href="https://www.jetbrains.com/help/phpstorm/configuring-xdebug.html"><i class="fa fa-cloud-download"></i> install it</a>
			</em>
		</li>
		<li class="fragment roll-in">Git & GitHub Account</li>
		</li>
		<li class="fragment roll-in">Composer
			<em class="aside">
				<a href="//getcomposer.org"><i class="fa fa-cloud-download"></i> getcomposer.org</a>
				and install it globally!
			</em>
		</li>
</section>


<section class="full-height" data-background="/img/vintage-computer3.jpg" data-background-transition="slide" data-transition="linear">
	<h2 class="bar">Erstes Projekt</h2>
</section>


<section>
	<h2>Neues Projekt anlegen</h2>
	<pre>
<code contenteditable data-trim class="bash">
composer global require "laravel/installer"
</code>
	</pre>
	<pre class="fragment">
<code contenteditable data-trim class="bash">
laravel new blog
</code>
	</pre>
	<div class="fragment wat skewed stamp-in" >
		<img src="/img/magic.gif">
	</div>
</section>


<section data-background="#706da7" class="bg-inverse" data-transition="zoom">
	<h2 class="no-border"><i class="fa fa-exclamation-triangle fa-lg fa-fw"></i> Git it under control</h2>
	<div class="handwriting fragment" style="left: 10em; top: 4em;">
		I see what you did.
	</div>
</section>


<section class="full-height" data-background="/img/cabinet.jpg" data-background-transition="slide" data-transition="linear">
	<h2 class="bar">Project Structure</h2>
</section>


<section>
	<h2>Projektstruktur</h2>
	<ul class="folders">
		<li>app
			<span class="handwriting fragment inline padded highlight-active">&lt; your stuff</span>
		</li>
		<li>bootstrap
			<span class="handwriting fragment inline padded highlight-active">&lt; startup stuff</span>
		</li>
		<li>config
			<span class="handwriting fragment inline padded highlight-active">&lt; configurations</span>
		</li>
		<li>database
			<span class="handwriting fragment inline padded highlight-active">&lt; databasy things </span>
		</li>
		<li>public
			<span class="handwriting fragment inline padded highlight-active">&lt; static stuff: img, js, css, etc.</span>
		</li>
		<li>resources
			<span class="handwriting fragment inline padded highlight-active">&lt; MVC-Views, JS-Code, Language-Files</span>
		</li>
		<li>routes
			<span class="handwriting fragment inline padded highlight-active">&lt; create some fancy URL's here</span>
		</li>
		<li>storage
			<span class="handwriting fragment inline padded highlight-active">&lt; place to save uploads</span>
		</li>
		<li>tests
			<span class="handwriting fragment inline padded highlight-active">&lt; testing stuff</span>
		</li>
		<li class="file">composer.json
			<span class="handwriting fragment inline padded highlight-active">&lt; stuff you want from others</span>
		</li>
		<li>vendor
			<span class="handwriting fragment inline padded highlight-active">&lt; other people's stuff (libraries)</span>
		</li>
	</ul>
</section>

<section class="full-height" data-background="/img/bob-ross.jpg" data-background-transition="slide" data-transition="linear">
	<h2 class="bar">Artisan</h2>
</section>


<section class="stack">
	<section>
		<h2>Artisan (Künstler)</h2>
		<p>
			Command line tool von Laravel, das uns noch viel Arbeit ersparen wird.
		</p>
		<pre>
<code contenteditable data-trim class="bash">
php artisan
</code>
		</pre>
		<h2>Eingebauter Server</h2>
		<p>localhost:8000</p>
		<pre>
<code contenteditable data-trim class="bash">
php artisan serve
</code>
		</pre>
	</section>
</section>


<section class="full-height" data-background="/img/vintage-routing1.jpg" data-background-transition="slide" data-transition="linear">
	<h2 class="bar">Routing</h2>
</section>


<section>
	<h2>Basic Routing</h2>
	<pre>
<code contenteditable data-trim class="php" data-filename="routes/web.php">
Route::get('/hello', function() {
	return 'Hello World!';
});
</code>
	</pre>
</section>

<section>
	<h2>Route Parameters</h2>
	<div class="fragment-block">
		<pre>
<code contenteditable data-trim class="php" data-filename="routes/web.php">
// pass parameters via URI

Route::get('/hello/{name}', function($name) {
   return 'Hello ' . $name . '!';
});

</code>
		</pre>
		<pre class="fragment">
<code contenteditable data-trim class="php" data-filename="routes/web.php">
// escape output for safety

Route::get('/hello/{name}', function($name)
{
	return 'Hello, ' . e($name) . '!';
});
</code>
		</pre>
		<pre class="fragment">
<code contenteditable data-trim class="php" data-filename="routes/web.php">
// filter the URI data

Route::get('/hello/{name}', function($name) {
   return 'Hello ' . e($name) . '!';
})->where('name', '[A-za-z]+');
</code>
		</pre>
		<pre class="fragment">
<code contenteditable data-trim class="php" data-filename="routes/web.php">
// make the param optional

Route::get('/hello/{name?}', function($name='stranger')
{
	return 'Hello, ' . e($name);
})->where('name','[A-za-z]+');
</code>
		</pre>
	</div>
</section>


<section>
	<h2>Listing Routes</h2>
	<pre>
<code contenteditable data-trim class="bash">
php artisan routes
</code>
	</pre>
	<aside class="notes">
		<i class="fa fa-fw fa-terminal"></i> php artisan route:list<br>
	</aside>
</section>

<section class="full-height" data-background="/img/vintage-controller1.jpg" data-background-transition="slide" data-transition="linear">
	<h2 class="bar">Controllers</h2>
</section>


<section>
	<h2>Controller Routing</h2>
	<pre>
<code contenteditable data-trim class="php" data-filename="routes/web.php">
Route::get('hello/{name?}', 'HelloController@showWelcome');
</code>
	</pre>
	<pre>
<code contenteditable data-trim class="php" data-filename="app/controllers/HelloController.php">
class HelloController extends BaseController {

	public function showWelcome($name='stranger')
	{
		return 'Hello, '. e($name) . '!';
	}

}
</code>
	</pre>
	<aside class="notes">
		<i class="fa fa-fw fa-terminal"></i> git checkout v3.0<br>
		<i class="fa fa-fw fa-compass"></i> /hello/colin<br>
	</aside>
</section>


<section>
	<h2>RESTful Controllers</h2>
	<pre>
<code contenteditable data-trim class="php" data-filename="routes/web.php">
Route::controller('users', 'UsersController');
</code>
	</pre>
	<pre>
<code contenteditable data-trim class="php" data-filename="app/controllers/UsersController.php">
class UsersController extends BaseController {

	public function getIndex() {
			// GET http://domain.com/users
	}

	public function postProfile() {
			// POST http://domain.com/users/profile
	}

}
</code>
	</pre>
	<aside class="notes">
<i class="fa fa-fw fa-terminal"></i> git checkout v3.0<br>
<i class="fa fa-fw fa-pencil"></i> routes/web.php<br>
<i class="fa fa-fw fa-pencil"></i> app/controllers/UsersController.php
	</aside>
</section>


<section>
	<h2>Resource Controllers</h2>
	<pre>
<code contenteditable data-trim class="bash">
php artisan controller:make PostsController
</code>
	</pre>
	<pre class="fragment">
<code contenteditable data-trim class="php" data-filename="routes/web.php">
Route::resource('posts', 'PostsController');
</code>
	</pre>
	<pre class="fragment">
<code contenteditable data-trim class="php" data-filename="app/controllers/PostsController.php">
class PostsController extends BaseController {

	public function index() {}
	public function create() {}
	public function store() {}
	public function show($id) {}
	public function edit($id) {}
	public function update($id) {}
	public function destroy($id) {}

}
</code>
	</pre>
	<pre class="fragment">
<code contenteditable data-trim class="bash">
php artisan routes
</code>
	</pre>
	<aside class="notes">
<i class="fa fa-fw fa-terminal"></i> php artisan controller:make PostsController<br>
<i class="fa fa-fw fa-pencil"></i> routes/web.php<br>
<i class="fa fa-fw fa-pencil"></i> app/controllers/PostsController.php<br>
<i class="fa fa-fw fa-terminal"></i> php artisan routes<br>
	</aside>
</section>


<section class="full-height" data-background="/img/views.jpg" data-background-transition="slide" data-transition="linear">
	<h2 class="bar">Views</h2>
</section>


<section>
	<h2>Passing Data to Views</h2>
	<div class="fragment-block">
		<pre>
<code contenteditable data-trim class="php" data-filename="app/controller/HelloController.php">
class HelloController extends BaseController {

	public function showWelcome($name='stranger')
	{
		return View::make('hello', array('name'=>$name) );
	}

}
</code>
		</pre>
		<pre class="fragment">
<code contenteditable data-trim class="php" data-filename="app/controller/HelloController.php">
class HelloController extends BaseController {

	public function showWelcome($name='stranger')
	{
		return View::make('hello', compact('name') );
	}

}
</code>
		</pre>
	</div>
	<div class="fragment-block">
		<pre>
<code contenteditable data-trim class="html" data-filename="app/views/hello.php">
&lt;html&gt;
	&lt;body&gt;
		&lt;p&gt;Hello, &lt;?php echo e($name); ?&gt;!&lt;/p&gt;
	&lt;/body&gt;
&lt;/html&gt;
</code>
		</pre>
		<pre class="fragment">
<code contenteditable data-trim class="html" data-filename="app/views/hello.blade.php">
&lt;html&gt;
	&lt;body&gt;
		&lt;p&gt;Hello, {{{ $name }}}!&lt;/p&gt;
	&lt;/body&gt;
&lt;/html&gt;
</code>
		</pre>
	</div>
	<aside class="notes">
<i class="fa fa-fw fa-terminal"></i> git checkout 4.0<br>
<i class="fa fa-fw fa-pencil"></i> app/controllers/HelloController.php<br>
<i class="fa fa-fw fa-pencil"></i> app/views/hello.blade.php<br>
	</aside>
</section>


<section class="full-height" data-background="/img/blade1.png" data-background-transition="zoom" data-transition="linear">
	<h2 class="bar">Blade Templating</h2>
</section>



<section class="stack">

	<section>
		<h2>Outputting Data</h2>
		<pre>
<code contenteditable data-trim class="php" data-filename="app/views/VIEWNAME.blade.php">
&lt;html&gt;
	&lt;body&gt;
		// echo and escape output
		Hello {{ $name }}!  Hello {{{ $html }}}!
	&lt;/body&gt;
&lt;/html&gt;
</code>
	 </pre>
	</section>

	<section>
		<h2>If Statements</h2>
		<pre>
<code contenteditable data-trim class="php" data-filename="app/views/VIEWNAME.blade.php">
@if( $name=='Bob' )
	Good to see you, Bob!
@elseif( $name=='Mary' )
	Howya doing, Mary!
@else
	Hey, where did Bob go?
@endif

@unless( $signed_in )
	You are not signed in.
@endunless
</code>
	 </pre>
	</section>

	<section>
		<h2>Loops</h2>
		<pre>
<code contenteditable data-trim class="php" data-filename="app/views/VIEWNAME.blade.php">
@for ($i = 0; $i < 10; $i++)
	The current value is {{ $i }}
@endfor

@foreach ($users as $user)
	<p>This is user {{ $user->id }}</p>
@endforeach

@while (true)
	<p>Make it stop!</p>
@endwhile
</code>
		</pre>
	</section>

	<section>
		<h2>Layouts</h2>
		<pre>
<code contenteditable data-trim class="html" data-filename="app/views/layouts/master.blade.php">
&lt;html&gt;
	&lt;body&gt;
		@include('header')  {{-- app/views/header.blade.php --}}

		@section('sidebar')
			This is the master sidebar.
		@show

		&lt;div class="container"&gt;
			@yield('content', 'Default content')
		&lt;/div&gt;
	&lt;/body&gt;
&lt;/html&gt;
</code>
		</pre>
		<pre>
<code contenteditable data-trim class="php" data-filename="app/views/VIEWNAME.blade.php">
@extends('layouts.master')

@section('sidebar')
	@parent
	<p>This is appended to the master sidebar.</p>
@stop

@section('content')
	<p>This is my body content.</p>
@stop
</code>
		</pre>
		<aside class="notes">
			<i class="fa fa-fw fa-terminal"></i> git checkout v4.1<br>
		</aside>
	</section>

</section>


<section class="full-height" data-background="/img/tape-drives.jpg" data-background-transition="slide" data-transition="linear">
	<h2 class="bar">Database</h2>
</section>


<section>
	<h2>Supported Databases</h2>
	<p>
		Out-of-the-box support for:
	</p>
	<ul>
		<li>MySQL</li>
		<li>Postgres</li>
		<li>SQLite</li>
		<li>SQL Server</li>
	</ul>
</section>


<section class="stack">

	<section>
		<h2>Configuration</h2>
		<div class="fragment-block">
			<pre class="fragmentx">
<code contenteditable data-trim class="php" data-filename="app/config/database.php">
return array(
	'default' => 'mysql',

	'connections' => array(
		'mysql' => array(
			'driver'    => 'mysql',
			'host'      => 'localhost',
			'database'  => 'my-project',
			'username'  => 'db_user',
			'password'  => 's3creT_pa5sw0rD'
			'charset'   => 'utf8',
			'collation' => 'utf8_unicode_ci',
			'prefix'    => '',
		),
	…
</code>
		</pre>
			<pre class="fragment">
<code contenteditable data-trim class="php" data-filename="app/config/database.php">
return array(
	'default' => 'mysql',

	'connections' => array(
		'mysql' => array(
			'driver'    => 'mysql',
			'host'      => 'localhost',
			'database'  => 'my-project',
			'username'  => $_ENV['MYSQL_USER'],
			'password'  => $_ENV['MYSQL_PASS'],
			'charset'   => 'utf8',
			'collation' => 'utf8_unicode_ci',
			'prefix'    => '',
		),
	…
</code>
		</pre>
	</div>
	</section>

	<section>
		<h2>Secret Environment Variables</h2>
		<pre>
<code contenteditable data-trim class="php" data-filename=".env.php">
return array(
	'MYSQL_USER' => 'dbuser',
	'MYSQL_PASS' => 's3creT_pa5sw0rD',
);
</code>
		</pre>
		<aside class="notes">
			<i class="fa fa-fw fa-terminal"></i> git checkout v5.0<br>
		</aside>
	</section>

</section>


<section class="full-height" data-background="/img/migration2.jpg" data-background-transition="slide" data-transition="linear">
	<h2 class="bar">Migrations</h2>
</section>



<section class="stack">

	<section>
		<h2>Preparing</h2>
		<pre>
<code contenteditable data-trim class="bash">
php artisan migrate:install

php artisan migrate:make create_posts_table --create="posts"
</code>
		</pre>
		<aside class="notes">
			<i class="fa fa-fw fa-terminal"></i> php artisan migrate:install<br>
			<i class="fa fa-fw fa-terminal"></i> php artisan migrate:make create_posts_table --create="posts"<br>
		</aside>
	</section>

	<section>
		<h2>Migration File</h2>
		<pre>
<code contenteditable data-trim class="php" data-filename="app/database/migrations/###_create_posts_table.php">
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Database\Migrations\Migration;

class CreatePostsTable extends Migration {

	/**
	 * Run the migrations.
	 *
	 * @return void
	 */
	public function up()
	{
		//
	}

	/**
	 * Reverse the migrations.
	 *
	 * @return void
	 */
	public function down()
	{
		//
	}

}
</code>
		</pre>
	</section>

	<section>
		<h2>Schema Building</h2>
		<pre>
<code contenteditable data-trim class="php">
public function up()
{
	Schema::create('posts', function(Blueprint $table) {
		$table->increments('id');
		$table->string('title', 50);
		$table->text('text')->nullable();
		$table->boolean('active')->default(true);
		$table->timestamps();  // created_at and updated_at
	});
}
</code>
<code contenteditable data-trim class="php">
public function down()
{
	Schema::drop('posts');
}
</code>
		</pre>
	</section>

	<section>
		<h2>Run Migrations</h2>
		<pre>
<code contenteditable data-trim class="bash">
php artisan migrate
</code>
		</pre>
		<div class="fragment">
			<h2>Ooops!</h2>
			<pre>
<code contenteditable data-trim class="bash">
php artisan migrate:rollback
</code>
			</pre>
		</div>
		<aside class="notes">
			<i class="fa fa-fw fa-folder"></i> SQL<br>
		</aside>
	</section>

</section>


<section class="full-height" data-background="/img/models2.jpg" data-background-transition="fade" data-transition="linear">
	<h2 class="bar">Models</h2>
</section>


<section>
	<h2>Eloquent</h2>
	<pre>
<code contenteditable data-trim class="php" data-filename="app/models/Post.php">
class Post extends Eloquent {}
</code>
	</pre>
</section>


<section class="stack">
	<section>
		<h2>Create a New Model</h2>
		<pre>
<code contenteditable data-trim class="php">
$post = Post::create(
	array(
		'title'  => 'My First Post',
		'text'   => 'Lorem ipsum dolor sit amet, consectetur adipisicing elit',
		'active' => true,
	)
);
</code>
		</pre>
		<aside class="notes">
			<i class="fa fa-fw fa-terminal"></i> git checkout v5.1<br>
			<i class="fa fa-fw fa-pencil"></i> routes/web.php<br>
			<i class="fa fa-fw fa-compass"></i> /make-post<br>
			<i class="fa fa-fw fa-folder"></i> SQL<br>
		</aside>
	</section>

	<section>
		<h2>Retrieving</h2>
		<pre>
<code contenteditable data-trim class="php">
$post = Post::find(1);
</code>
<code contenteditable data-trim class="php fragment">
$post = Post::findOrFail(1);
</code>
<code contenteditable data-trim class="php fragment">
$posts = Post::where('id','>',3)->get();
$post = Post::where('title','LIKE','laravel')->first();
</code>
<code contenteditable data-trim class="php fragment">
$posts = Post::all();
</code>
		</pre>
	</section>

	<section>
		<h2>Using</h2>
		<pre>
<code contenteditable data-trim class="php">
$post = Post::find(1);

echo $post->title;
echo $post->created_at;		// uses Carbon package for date handling
</code>
<code contenteditable data-trim class="php fragment">
$posts = Post::all();

foreach( $posts as $post )
{
	echo $post->title;
}
</code>
		</pre>
	</section>

	<section>
		<h2>Deleting</h2>
		<pre>
<code contenteditable data-trim class="php">
$post = Post::find(1);
$post->delete();
</code>
<code contenteditable data-trim class="php fragment">
Post::destroy(1);
Post::destroy(1,2,3);
</code>
<code contenteditable data-trim class="php fragment">
$lastWeek = Carbon::now()->subWeek();
Post::where('created_at','<', $lastWeek)->delete();
</code>
		</pre>
	</section>

</section>



<section class="full-height" data-background="/img/simpsons-fish.jpg" data-background-transition="fade" data-transition="linear">
	<h2 class="bar">Accessors &amp; Mutators</h2>
</section>



<section class="stack">
	<section>
		<h2>Accessors</h2>
		<pre>
<code contenteditable data-trim class="php">
class Post extends Eloquent {

		public function getTitleAttribute($value)
		{
				return ucwords($value);
		}

}
</code>
<code contenteditable data-trim class="php fragment">
$post = Post::create(array(
	'title' => 'my first post'
));

echo $post->title;		// "My First Post"
</code>
		</pre>
	</section>

	<section>
		<h2>Mutators</h2>
		<pre>
<code contenteditable data-trim class="php">
class Post extends Eloquent {

		public function setTextAttribute($value)
		{
				$value = trim($value);
				$this->attributes['text'] = $value;

				// not limited to modifying the one attribute
				$this->attributes['excerpt'] = substr($value,0,97) . '...';

		}

}
</code>
		</pre>
		<aside class="notes">
			<i class="fa fa-fw fa-terminal"></i> git checkout v5.2<br>
			<i class="fa fa-fw fa-pencil"></i> app/models/Post.php<br>
			<i class="fa fa-fw fa-pencil"></i> routes/web.php<br>
			<i class="fa fa-fw fa-compass"></i> /make-post<br>
			<i class="fa fa-fw fa-folder"></i> SQL<br>
		</aside>
	</section>
</section>



<section class="full-height" data-background="/img/relationships.jpg" data-background-transition="slide" data-transition="linear">
	<h2 class="bar">Relationships</h2>
</section>



<section class="stack">

	<section>
		<h2>One-to-One</h2>
		<pre>
<code contenteditable data-trim class="php">
class Comment extends Eloquent {

	// comments table has an `author_id` field

	public function author()
	{
		return $this->hasOne('Author');
	}

}
</code>
<code contenteditable data-trim class="php">
$author = Comment::find(1)->author;
</code>
		</pre>
	</section>

	<section>
		<h2>Inverse</h2>
		<pre>
<code contenteditable data-trim class="php">
class Author extends Eloquent {

	// authors table needs a `post_id` column

	public function comment()
	{
		return $this->belongsTo('Comment');
	}

}
</code>
<code contenteditable data-trim class="php">
$title = Author::find(1)->comment->title;
</code>
		</pre>
	</section>

</section>


<section>
	<h2>One-to-Many</h2>
	<pre>
<code contenteditable data-trim class="php">
class Book extends Eloquent {

	// books table has `author_id` column

	public function author()
	{
		return $this->belongsTo('Author');
	}

}

class Author extends Eloquent {

	public function books()
	{
		return $this->hasMany('Book');
	}

}
</code>
<code contenteditable data-trim class="php">
$my_books = Author::where('firstname','=','Colin')->books;
</code>
	</pre>
</section>



<section class="stack">

	<section>
		<h2>Many-to-Many</h2>
		<pre>
<code contenteditable data-trim class="php">
class Book extends Eloquent {
	public function tags()
	{
		return $this->belongsToMany('Tag');
	}
}

class Tag extends Eloquent {
	public function books()
	{
		return $this->belongsToMany('Book');
	}
}
</code>
		</pre>
	</section>

	<section>
		<h2>Pivot Table</h2>
		<pre>
<code contenteditable data-trim class="php">
Schema::create('book_tag', function(Blueprint $table) {
	$table->increments('id');
	$table->integer('book_id')->unsigned()->index();
	$table->integer('tag_id')->unsigned()->index();
});
</code>
		</pre>
	</section>

	<aside class="notes">
		<i class="fa fa-fw fa-terminal"></i> git checkout v6.0<br>
		<i class="fa fa-fw fa-pencil"></i> app/model/Book.php<br>
		<i class="fa fa-fw fa-pencil"></i> app/model/Author.php<br>
		<i class="fa fa-fw fa-pencil"></i> app/model/Tags.php<br>
		<i class="fa fa-fw fa-terminal"></i> php artisan migrate<br>
		<i class="fa fa-fw fa-terminal"></i> php artisan db:seed<br>
		<i class="fa fa-fw fa-folder"></i> SQL<br>
	</aside>
</section>


<section>
	<h2>Eager Loading</h2>
	<pre>
<code contenteditable data-trim class="php">
Book::with('author')->get();
</code>
	</pre>
	<pre class="fragment">
<code contenteditable data-trim class="php">
Book::with('author','tags')->get();
</code>
	</pre>
	<pre class="fragment">
<code contenteditable data-trim class="php">
Tag::with('books.author')->get();
</code>
	</pre>
</section>


<section class="full-height" data-background="/img/forms2.jpg" data-background-transition="slide" data-transition="linear">
	<h2 class="bar">Form Handing</h2>
</section>


<section>
	<h2>Building Forms</h2>
	<pre>
<code contenteditable data-trim class="php">
{{ Form::open() }}

{{ Form::label('title') }}
{{ Form::text('title', 'default', array('class'=>'form-control') }}

{{ Form::label('text', 'Enter the full text:') }}
{{ Form::textarea('text', 'default', array('placeholder'=>'Enter the text') }}

{{ Form::email('email') }}

{{ Form::checkbox('is_active', 1, null, array('tabindex'=>4) }}
	{{ Form::label('is_active', 'Yes') }}

{{ Form::submit('Send it!')}}

{{ Form::close() }}

</code>
	</pre>
</section>


<section>
	<h2>Handling Input</h2>
	<pre>
<code contenteditable data-trim class="php">
$input = Input::get('field','default');
</code>
	</pre>
	<pre class="fragment">
<code contenteditable data-trim class="php">
$input = Input::only('firstname','lastname');
$input = Input::except('credit_card');
$input = Input::get('choices.0.name');
</code>
	</pre>
	<pre class="fragment">
<code contenteditable data-trim class="php">
$input = Input::all();
</code>
	</pre>
	<pre class="fragment">
<code contenteditable data-trim class="php">
$input = Input::file('upload_field');
</code>
	</pre>
</section>


<section>
	<h2>Form Model Binding</h2>
	<pre>
<code contenteditable data-trim class="php">
$book = Book::findOrFail($id);
return View::make('books.edit', compact('book'));
</code>
	</pre>
	<pre>
<code contenteditable data-trim class="php">
{{ Form::model($book, array('route'=>array('books.update', $book->id), 'method'=>'PUT') ) }}

{{ Form::text('title')}}
{{ Form::textarea('description')}}
…

{{ Form::close() }}
</code>
	</pre>
</section>


<section class="full-height" data-background="/img/validate.jpg" data-background-transition="fade">
	<h2 class="bar">Validation</h2>
</section>


<section>
	<h2>Validation Rules</h2>
	<pre>
<code contenteditable data-trim class="php">
$data = array(
	'title' => 'My First Post',
	'text'  => 'Lorem hipster YOLO sic amet, semiotics banh mi flexitarian.',
));

$rules = array(
	'title'        => 'required|min:5',
	'description'  => 'required|max:100'
);
</code>
	</pre>
</section>


<section>
	<h2>Validation</h2>
	<pre>
<code contenteditable data-trim class="php">
$validator = Validator::make( $data, $rules );
</code>
	</pre>
	<pre class="fragment">
<code contenteditable data-trim class="php">
if ( $validator->fails() )       // ->passes()
{
	$messages = $validator->messages();
	…
}
</code>
	</pre>
	<pre class="fragment">
<code contenteditable data-trim class="php">
if ( $messages->has('email') )
{
	echo $messages->first('email', '<p>:message</p>');
}
</code>
	</pre>
	<pre class="fragment">
<code contenteditable data-trim class="php">
$messages->get('field');
$messages->all();
</code>
	</pre>
</section>


<section>
	<h2>Validation Rules</h2>
	<pre>
<code contenteditable data-trim class="php">
$rules = array(
	'firstname'  => 'required',
	'lastname'   => 'alpha',
	'email'      => 'email',
	'age'        => 'integer|between:18,65',
	'agree'      => array('required','accepted'),
	'website'    => 'url',
	'password'   => 'confirmed',              // implies matching 'password_confirmation' data
	'company_id' => 'exists:companies,id',
	'gender'     => 'in:male,female',
	'photo'      => 'mimes:jpeg,png|max:100', // kilobytes
	'postalcode' => 'regex:^[A-Z][0-9][A-Z] ?[0-9][A-Z][0-9]$'
);
</code>
	</pre>
</section>

<section class="full-height" data-background="/img/logging1.jpg" data-background-transition="fade" data-transition="linear">
	<h2 class="bar">Logging</h2>
</section>


<section>
	<h2>Logging</h2>
	<p>
		Built on top of <a href="//github.com/seldaek/monolog"><i class="fa fa-fw fa-cloud-download"></i> Monolog</a>
	</p>
	<pre class="fragment">
<code contenteditable data-trim class="php">
Log::info('This is some useful information.');

Log::info('Information with context', array('context' => 'Other helpful information'));

Log::warning('Something could be going wrong.');

Log::error('OMGWTFBBQ!');
</code>
	</pre>
	<p class="fragment">
		<i class="fa fa-fw fa-file"></i><code>app/storage/logs/laravel.log</code>
	</p>
</section>

<section>
	<h2>Query Logging</h2>
	<pre>
<code contenteditable data-trim class="php">
$queries = DB::getQueryLog();
</code>
	</pre>
	<pre class="fragment">
<code contenteditable data-trim class="php">
DB::connection()->disableQueryLog();
</code>
	</pre>
	<aside class="notes">
		<i class="fa fa-fw fa-terminal"></i> git checkout v6.1<br>
		<i class="fa fa-fw fa-compass"></i> /books<br>
		<i class="fa fa-fw fa-compass"></i> /books/1<br>
	</aside>
</section>


<section class="full-height" data-background="/img/caching1.jpg" data-background-transition="fade" data-transition="linear">
	<h2 class="bar">Caching</h2>
</section>


<section>
	<h2>Cache Configuration</h2>
	<ul>
		<li>
			<i class="fa fa-fw fa-file"></i><code>app/config/cache.php</code>
		</li>
		<li class="fragment">
			Drivers:
			<ul class="caret">
				<li>file</li>
				<li>database</li>
				<li>apc</li>
				<li>memcached</li>
				<li>redis</li>
				<li>array</li>
			</ul>
		</li>
	</ul>
</section>


<section>
	<h2>Cache Usage</h2>
	<pre>
<code contenteditable data-trim class="php">
Cache::put('key', 'value', $minutes);
</code>
	</pre>
	<pre class="fragment">
<code contenteditable data-trim class="php">
$expiresAt = Carbon::now()->addHours(10);
Cache::put('key', 'value', $expiresAt);
</code>
	</pre>
	<pre class="fragment">
<code contenteditable data-trim class="php">
if (Cache::has('key')) { … }
</code>
	</pre>
	<pre class="fragment">
<code contenteditable data-trim class="php">
$value = Cache::get('key');
$value = Cache::get('key', 'default');
$value = Cache::get('key', function() { return 'default'; });
</code>
	</pre>
	<pre class="fragment">
<code contenteditable data-trim class="php">
$value = Cache::forever('key', 'value');
</code>
	</pre>
	<pre class="fragment">
<code contenteditable data-trim class="php">
Cache::forget('key');
</code>
	</pre>
</section>


<section>
	<h2>Advanced Cache Usage</h2>
	<pre>
<code contenteditable data-trim class="php">
$books = Cache::remember('all-books', 10, function()
{
	return Book::with('author')
		->orderBy('title')
		->get();
});
</code>
	</pre>
	<aside class="notes">
		<i class="fa fa-fw fa-pencil"></i> app/controllers/BookController.php<br>
		<i class="fa fa-fw fa-compass"></i> /books<br>
		etc.
	</aside>
</section>


<section class="full-height" data-background="/img/mail1.jpg" data-background-transition="fade" data-transition="linear">
	<h2 class="bar">Mail</h2>
</section>


<section>
	<h2>Mail Configuration</h2>
	<ul>
		<li>
			Built on top of <a href="//swiftmailer.org/"><i class="fa fa-fw fa-cloud-download"></i> SwiftMailer</a>
		</li>
		<li class="fragment">
			<i class="fa fa-fw fa-file"></i><code>app/config/mail.php</code>
		</li>
		<li class="fragment">
			Drivers:
			<ul class="caret">
				<li>smtp</li>
				<li>mail</li>
				<li>sendmail</li>
			</ul>
		</li>
	</ul>
</section>


<section>
	<h2>Mail Usage</h2>
	<div class="fragment-block">
	<pre>
<code contenteditable data-trim class="php">
Mail::send('emails.view', $data, function($message)
{
	$message->to('colin@example.com', 'Colin Viebrock')
		->subject('Welcome!');
});
</code>
	</pre>
	<pre class="fragment">
<code contenteditable data-trim class="php">
Mail::send( array('emails.view.html', 'emails.view.text'), $data, function($message)
{
	$message->to('colin@example.com', 'Colin Viebrock')
		->subject('Welcome!');
});
</code>
	</pre>
	<pre class="fragment">
<code contenteditable data-trim class="php">
Mail::send( array('emails.view.html', 'emails.view.text'), $data, function($message)
{
	$message->to('colin@example.com', 'Colin Viebrock')
		->subject('Welcome!')
		->cc('bar@example.com')
		->bcc('snoop@nsa.gov');
});
</code>
	</pre>
	<pre class="fragment">
<code contenteditable data-trim class="php">
Mail::send( array('emails.view.html', 'emails.view.text'), $data, function($message)
{
	$message->to('colin@example.com', 'Colin Viebrock')
		->subject('Welcome!')
		->cc('bar@example.com')
		->bcc('snoop@nsa.gov');

	$message->attach($pathToFile);
});
</code>
	</pre>
	<pre class="fragment">
<code contenteditable data-trim class="php">
Mail::send( array('emails.view.html', 'emails.view.text'), $data, function($message)
{
	$message->to('colin@example.com', 'Colin Viebrock')
		->subject('Welcome!')
		->cc('bar@example.com')
		->bcc('snoop@nsa.gov');

	$message->attach($pathToFile, array('as' => $display, 'mime' => $mime));
});
</code>
	</pre>
	</div>
</section>


<section>
	<h2>Inline data</h2>
	<pre>
<code contenteditable data-trim class="html">
&lt;body&gt;
	Here is an image &lt;img src="{{ $message->embed($pathToFile) }}"&gt;
&lt;/body&gt;
</code>
	</pre>
	<pre class="fragment">
<code contenteditable data-trim class="html">
&lt;body&gt;
	Here is raw image data &lt;img src="{{ $message->embedData($data, $name) }}"&gt;
&lt;/body&gt;
</code>
	</pre>
</section>


<section>
	<h2>Queueing Mail</h2>
	<pre>
<code contenteditable data-trim class="php">
Mail::queue('emails.view', $data, function($message)
{
	$message->to('colin@example.com', 'Colin Viebrock')
		->subject('Welcome!');
});
</code>
	</pre>
	<pre class="fragment">
<code contenteditable data-trim class="php">
Mail::later($seconds, 'emails.view', $data, function($message)
{
	$message->to('colin@example.com', 'Colin Viebrock')
		->subject('Welcome!');
});
</code>
	</pre>
</section>



<section class="full-height" data-background="/img/queues.jpg" data-background-transition="fade" data-transition="linear">
	<h2 class="bar">Queues</h2>
</section>


<section>
	<h2>Queue Configuration</h2>
	<ul>
		<li>
			<i class="fa fa-fw fa-file"></i><code>app/config/queue.php</code>
		</li>
		<li class="fragment">
			Drivers:
			<ul class="caret">
				<li>sync
					<em class="aside">
						local syncronous queuing; no requirements
					</em>
				</li>
				<li>beanstalkd
					<em class="aside">
						Beanstalkd:
						<a href="//packagist.org/packages/pda/pheanstalk"><i class="fa fa-cloud-download"></i> pda/pheanstalk</a>
					</em>
				</li>
				<li>sqs
					<em class="aside">
						Amazon SQS:
						<a href="//packagist.org/packages/aws/aws-sdk-php"><i class="fa fa-cloud-download"></i> aws/aws-sdk-php</a>
					</em>
				</li>
				<li>iron
					<em class="aside">
						IronMQ:
						<a href="//packagist.org/packages/iron-io/iron_mq"><i class="fa fa-cloud-download"></i> iron-io/iron_mq</a>
					</em>
				</li>
			</ul>
		</li>
	</ul>
</section>


<section>
	<h2>Queue Usage</h2>
	<pre>
<code contenteditable data-trim class="php">
$data = array('foo' => 'bar');

Queue::push('MyJob', $data);
</code>
	</pre>
	<pre class="fragment">
<code contenteditable data-trim class="php">
class MyJob {

	public function fire($job, $data)
	{
		…
	}

}
</code>
	</pre>
</section>


<section>
	<h2>Advanced Queue Usage</h2>
	<pre>
<code contenteditable data-trim class="php">
Queue::push('MyJob@someMethod', $data);
</code>
	</pre>
	<pre class="fragment">
<code contenteditable data-trim class="php">
$date = Carbon::now()->addMinutes(15);
Queue::later($date, 'MyJob', $data);
</code>
	</pre>
</section>

<section>
	<h2>Job Handling</h2>
	<div class="fragment-block">
	<pre>
<code contenteditable data-trim class="php">
public function fire($job, $data)
{
		// Process the job...

		$job->delete();
}
</code>
	</pre>
	<pre class="fragment">
<code contenteditable data-trim class="php">
public function fire($job, $data)
{
		// Process the job...

		$job->release();
}
</code>
	</pre>
	</div>
	<pre class="fragment">
<code contenteditable data-trim class="php">
		$job->release( $seconds );
</code>
	</pre>
	<pre class="fragment">
<code contenteditable data-trim class="php">
if ( $job->attempts() > 3 )
{
	…
}
</code>
	</pre>

</section>


<section>
	<h2>Queue Listening</h2>
	<div class="fragment-block">
	<pre>
<code contenteditable data-trim class="bash">
php artisan queue:listen
</code>
	</pre>
	<pre class="fragment">
<code contenteditable data-trim class="bash">
php artisan queue:listen --sleep=5
</code>
	</pre>
	<pre class="fragment">
<code contenteditable data-trim class="bash">
php artisan queue:listen --timeout=60
</code>
	</pre>
	</div>
	<pre class="fragment">
<code contenteditable data-trim class="bash">
php artisan queue:work
</code>
	</pre>
</section>


<section data-background="/img/other-features.jpg" data-background-transition="fade" data-transition="linear">
	<h2 class="bar fragment consecutive">Authentication</h2>
	<h2 class="bar fragment consecutive">Events</h2>
	<h2 class="bar fragment consecutive">Localization</h2>
	<h2 class="bar fragment consecutive">Packages</h2>
</section>

<section class="shaded bg-inverse" data-background="/img/books1.jpg" data-background-transition="fade" data-transition="linear">
	<h2>Further Reading</h2>
	<ul class="no-bullet">
		<li class="fragment">
			<i class="fa fa-fw fa-lg fa-faded fa-book"></i>
			<a href="//laravel.com/docs">laravel.com/docs</a>
		</li>
		<li class="fragment">
			<i class="fa fa-fw fa-lg fa-faded fa-cogs"></i>
			<a href="//laravel.com/docs">laravel.com/api</a>
		</li>
		<li class="fragment">
			<i class="fa fa-fw fa-lg fa-faded fa-github"></i>
			<a href="//github.com/laravel">github.com/laravel</a>
		</li>
		<li class="fragment">
			<i class="fa fa-fw fa-lg fa-faded fa-comments"></i>
			<a href="//laravel.io">laravel.io</a>
		</li>
		<li class="fragment">
			<i class="fa fa-fw fa-lg fa-faded fa-youtube-play"></i>
			<a href="//laracasts.com">laracasts.com</a>
		</li>
		<li class="fragment">
			<i class="fa fa-fw fa-lg fa-faded fa-github"></i>
			<a href="//github.com/cviebrock">github.com/cviebrock</a>
		</li>
	</ul>
</section>


<section class="full-height" data-background="/img/thats-all-folks.png" data-background-transition="fade" data-transition="zoom">
	<h1 class="thats-all fragment spin-in">That&rsquo;s All Folks!</h1>
</section>



			</div>
		</div>

		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.min.js"></script>
		<script>
			// Full list of configuration options available here:
			// https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
				width: 1440,
				height: 1000,
				margin: 0.15,

				controls: true,
				progress: true,
				history: true,
				center: true,

				theme: Reveal.getQueryHash().theme, // available themes are in /css/theme
				transition: Reveal.getQueryHash().transition || 'default', // default/cube/page/concave/zoom/linear/fade/none

				// Optional libraries used to extend on reveal.js
				dependencies: [
					{ src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
					{ src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/highlight/highlight.pack.js', async: true, callback: function() {
						hljs.configure({ tabReplace: '  ' });
						hljs.initHighlightingOnLoad();
					} },
					{ src: 'plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } },
					{ src: 'plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } }
				]
			});
		</script>
	</body>
</html>
